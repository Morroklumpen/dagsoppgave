<!DOCTYPE html>
<html lang="en">
<head>
  <%- include('../partials/head'); %>
</head>
<body class="container">

<header>
  <%- include('../partials/header'); %>
</header>

<main>

  <body>
    <h1>Welcome to My sWebsite</h1>
    
    <div class="jumbotron">
    <!-- Form to submit new posts -->
    <form id="postForm" method="POST" action="http://localhost:5000/post" enctype="multipart/form-data">
      <label for="title">Title:</label>
      <input type="text" id="title" name="title" required><br>
      <label for="content">Content:</label>
      <textarea id="content" name="content" required></textarea><br>
      <button type="submit">Submit</button>
    </form>
    </div>
    <hr>
  
    <!-- Display existing posts -->
    <div id="postsContainer"></div>
  
    <!-- <script>
      // Function to fetch and display posts
      async function fetchPosts() {
        const response = await fetch('http://localhost:5000/post');
        const posts = await response.json();
        const postsContainer = document.getElementById('postsContainer');
        postsContainer.innerHTML = ''; // Clear previous posts
        posts.forEach(post => {
          const postElement = document.createElement('div');
          postElement.innerHTML = `
            <div style="border: 1px solid #ccc; padding: 10px; margin-bottom: 10px;">
              <h3>${post.title}</h3>
              <p>${post.content}</p>
              <p><strong>Posted on:</strong> ${new Date(post.createdAt).toLocaleString()}</p>
            </div>
          `;
          postsContainer.appendChild(postElement);
        });
      }
  
      // Form submission handler
      document.getElementById('postForm').addEventListener('submit', async function(event) {
        event.preventDefault();
        const formData = new FormData(this);
        const response = await fetch('http://localhost:5000/post', {
          method: 'POST',
          body: formData
        });
        if (response.ok) {
          fetchPosts(); // Refresh posts after submission
          this.reset(); // Reset form fields
        } else {
          console.error('Failed to submit post');
        }
      });
  
      // Initial fetch of posts when the page loads
      fetchPosts();
    </script> -->
  </body>
</main>

<footer>
  <%- include('../partials/footer'); %>
</footer>

</body>
</html>
